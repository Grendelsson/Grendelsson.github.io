<!DOCTYPE html>
<html>
<head>
<meta name="robots" content="noindex">
<script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
<script type="text/javascript">
  function postUp(val){
    console.log('postUp called');
    window.top.postMessage(val,'*');
  }
  function getAndPost(){
    window.addEventListener('message',(msg) =>{
      postUp(msg.data);
    });
  }
  getAndPost();
  //subscribe to ready
  JFCustomWidget.subscribe("ready", function(){
    window.top.console.log('ready');
    JFCustomWidget.subscribe("submit", function(){
      window.top.console.log('submit event fires');
      // send value to JotForm
      JFCustomWidget.sendSubmit({valid: true, value: 'test send submit'});
    });
  });

  //
</script>
</head>
<body>
<div>
Testing custom widget
</div>
<button type="button" onclick="postUp(this.value)" value="Test button data">Test Button</button>
</body>
</html>