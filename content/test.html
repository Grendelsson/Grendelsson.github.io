<!DOCTYPE html>
<html>
<head>
<meta name="robots" content="noindex">
<script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
<script>
  function postUp(val){
    console.log('using callbacks');
    window.top.postMessage(val,'*');
  }
</script>
<script>
  var readyCallback = function(msg){
    console.log('ready: ',msg);
  }
  JFCustomWidget.subscribe("ready", readyCallback);
  JFCustomWidget.subscribe("submit", function(){
    var msg = {
      valid: true,
      value: 'test'
    }
    //this part will be used if your field is required. If your widget is required valid
    //property will be expected before form can be submitted
    // debugging
    console.log('submit callback');
    if(typeof(window.top.postMessage) !== 'undefined'){
      var val = {
        'submit': msg
      }
      window.top.postMessage(val,'https://beta.nice.org.uk');
    }
    //most probably you will call sendSubmit method
    JFCustomWidget.sendSubmit(msg);
  });
</script>
</head>
<body>
<div>
Testing custom widget
</div>
<button type="button" onclick="postUp(this.value)" value="Test button msg">Test Button</button>
</body>
</html>
